<!-- ajax::form -->
<div id="form">

<!-- hide form error -->
<div id="form_error">
	< bloc::form_error>
	<img src="img/icon-error.gif" align="absmiddle" /> {msg} <br />
	< /bloc::form_error>
</div>
<!-- hide form error -->

<form id="former" name="former" method="post" action="?mod={$plugin->name}&do={$plugin->action}&ID={$_GET['ID']}&ajax=1&target=form&popup={$_GET['popup']}&{formParameters}"  onsubmit="WYSIWYGhackSubmit()">
<div id="form_content">
	<bloc::f>

	<bloc::fieldset_start>
	<!-- fieldset -->
	<fieldset id="fieldset_{name}">
		<legend title="{help}">{label}</legend>
		{html}
	</bloc::fieldset_start>

	<!-- widget -->
	<bloc::widgets>
	<p>
		<label title="{help}">{label}
						<bloc::required>
						<span class="required">*</span>
						</bloc::required>
		</label>

		<bloc::text>
		<!-- text -->
			<input autocomplete="off" type="text" id="{name}" name="{name}" value="{value}" style="{style}" class="{class}" {attributes} />
			{after}
		<!-- /text -->
		</bloc::text>

		<bloc::filemanager_media>
		<!-- filemanager_media -->
			<input autocomplete="off" type="text" id="{name}" name="{name}" value="{value}" style="{style}" class="{class}" {attributes} />
			<a href="javascript:;" tabindex="-1" class="tt" title="{$nuts_lang_msg[87]}" onclick="mediaBrowser('{name}','{folder}');"><img class="icon" align="absmiddle" src="img/icon-folder.png"/></a>
			<a href="javascript:;" tabindex="-1" class="tt" title="{$nuts_lang_msg[86]}" onclick="openFile('{name}');"><img class="icon" align="absmiddle" src="img/icon-media.png"/></a>
			{after}
		<!-- /filemanager_media -->
		</bloc::filemanager_media>

		<bloc::filemanager>
		<!-- filemanager -->
			<input autocomplete="off" type="text" id="{name}" name="{name}" value="{value}" style="{style}" class="{class}" {attributes} />
			<a href="javascript:;" tabindex="-1" class="tt" title="{$nuts_lang_msg[87]}" onclick="allBrowser('{name}','{folder}');"><img class="icon" align="absmiddle" src="img/icon-folder.png"/></a>
			<a href="javascript:;" tabindex="-1" class="tt" title="{$nuts_lang_msg[86]}" onclick="openFile('{name}');"><img class="icon" align="absmiddle" src="img/icon-file.png"/></a>
			{after}
		<!-- /filemanager -->
		</bloc::filemanager>

		<bloc::filemanager_image>
		<!-- filemanager_image -->
			<input autocomplete="off" type="text" id="{name}" name="{name}" value="{value}" style="{style}" class="{class}" {attributes} />
			<a href="javascript:;" tabindex="-1" class="tt" title="{$nuts_lang_msg[87]}" onclick="imgBrowser('{name}','{folder}');"><img class="icon" align="absmiddle" src="img/icon-folder.png"/></a>
			<a href="javascript:;" tabindex="-1" class="tt" title="{$nuts_lang_msg[86]}" onclick="openFile('{name}');"><img class="icon" align="absmiddle" src="img/icon-preview-mini.gif"/></a>
			{after}
		<!-- /filemanager_image -->
		</bloc::filemanager_image>

		<bloc::hidden>
		<!-- hidden -->
			<input type="hidden" id="{name}" name="{name}" value="{value}" style="{style}" class="{class}" {attributes} />
			{after}
		<!-- /hidden -->
		</bloc::hidden>

		<bloc::date>
		<!-- date -->
			<input autocomplete="off" type="text" id="{name}" name="{name}" value="{value}" style="{style}"  class="{class}" {attributes} />
			<script>inputDate('{name}', 'date')</script>
			{after}
		<!-- /date -->
		</bloc::date>

		<bloc::datetime>
		<!-- datetime -->
			<input autocomplete="off" type="text" id="{name}" name="{name}" value="{value}" style="{style}"  class="{class}" {attributes} />
			<script>inputDate('{name}', 'datetime')</script>
			{after}
		<!-- /datetime -->
		</bloc::datetime>

		<bloc::image>
		<!-- image -->

			<div id="{name}ImagePreview" class="image_preview" style="display:{image_display};">

				<a href="javascript:$('#{name}').click();" title="<img src='{image_path}/{image_name}?{time}' style='max-width:500px'>" class="tt"><img src="{image_path}/{image_name}?{time}" style="max-width:80px; max-height:80px;"  align="absmiddle" /></a>
				<br />
				<input type="checkbox" name="{name}ImageDelete" value="1" /> {$nuts_lang_msg[40]}
			</div>


			<input type="file" id="{name}" name="{name}" style="{style}" class="{class}" {attributes} onchange="$('#a_{name}').fadeIn('normal');" size="62" />
			<a id="a_{name}" style="display:none;" href="javascript:;" onclick="$('#{name}').val(''); $('#a_{name}').fadeOut('normal');">{$nuts_lang_msg[22]}</a>

			<script>
			$(document).ready(function(){
				if($('#{name}ImagePreview').is(':visible')){
					$('#{name}').css('margin-top', '25px');
				}
			});
			</script>


			{after}


			<div style="clear:left"></div>

		<!-- /image -->
		</bloc::image>

		<bloc::file>
		<!-- file -->
			<div id="{name}FilePreview" class="file_preview"  style="display:{file_display};">

					<a href="{file_path}/{file_name}" target="_blank"><img src="/plugins/_url_rewriting/icon.png" style="width:32px" align="absmiddle" /></a><br />
					<input type="checkbox" name="{name}FileDelete" value="1" /> {$nuts_lang_msg[40]}
			</div>

			<input type="file" id="{name}" name="{name}" style="{style}"  class="{class}" {attributes} size="62" onchange="$('#a_{name}').fadeIn('normal');" />
			<a id="a_{name}" style="display:none;" href="javascript:;" onclick="$('#{name}').val(''); $('#a_{name}').fadeOut('normal');">{$nuts_lang_msg[22]}</a>
			{after}

			<script>
			$(document).ready(function(){
				if($('#{name}FilePreview').is(':visible')){
					$('#{name}').css('margin-top', '25px');
				}
			});
			</script>


			<div style="clear:left"></div>

		<!-- /file -->
		</bloc::file>

		<bloc::textarea>
		<!-- textarea -->
			<textarea style="{style}" id="{name}" name="{name}" class="{class}" {attributes}>{value}</textarea>
			{after}
		<!-- /textarea -->
		</bloc::textarea>

		<bloc::select>
		<!-- select -->
		<select id="{nameID}" name="{name}" style="{style}"  class="{class}" {attributes}>
			<bloc::options>
			<option value="{value}">{label}</option>
			</bloc::options>
		</select>
		{after}
		<!-- select -->
		</bloc::select>

		<bloc::colorpicker>
		<!-- colorpicker -->
		<input type="text" id="{name}" name="{name}" value="{value}" style="width:50px; {style}" maxlength="7" class="widget_colorpicker {class}" {attributes}  onclick="startColorPicker(this)" onkeyup="maskedHex(this)" /> {after}
		<!-- /colorpicker -->
		</bloc::colorpicker>

	</p>
	</bloc::widgets>
	<!-- /widget -->

	<bloc::fieldset_end>
	</fieldset>
	<!-- end of fieldset -->
	</bloc::fieldset_end>

	</bloc::f>
	<p>&nbsp;</p>

</div>

<p class="bottom">
	<input type="submit" name="btn_submit" id="btn_submit" value="{$nuts_lang_msg[21]}" />
	<label style="margin:0; float:none; display:inline;"><input type="checkbox" id="close_after" checked /> {$nuts_lang_msg[26]}</label>
	&nbsp; &nbsp;  &nbsp; &nbsp;
	<input type="button" name="btn_cancel" id="btn_cancel" value="{$nuts_lang_msg[22]}" onclick="forceWYSIWYGUpdate();if('{$_GET['popup']}' == '1'){window.close();}else{$('#form_window').dialog('close');}" />

	<div style="float:right; margin-top:-35px; margin-right: 10px;">
		<a class="noprint tt" title="{$nuts_lang_msg[52]}" href="javascript:printDialog();"><img align="absbottom" src="img/icon-print.png" /></a>
	</div>
</p>


{end_text}
<bloc::js>
	<script src="{js_file}"></script>
</bloc::js>




<script type="text/javascript">
	var nutsCurrentPageLang = "{$NutsUserLang}";

	var nuts_lang_msg_23 = "{$nuts_lang_msg[23]}";
	var nuts_lang_msg_21 = "{$nuts_lang_msg[21]}";
	var popup = "{$_GET['popup']}";
	var currentTheme = "{$theme}";
	var form_ajax_ac_uri = "index.php?mod={$plugin->name}&do={$plugin->action}&form_ajax_ac=1&form_ajax_ac_col=";
	var form_fields = {form_fields};
	var form_percent = "{form_percent}";
	var form_percent_uri = "index.php?mod={$plugin->name}&do={$plugin->action}&form_ajax_treatment=1";
    var form_plugin = "{$plugin->name}";

</script>
<script type="text/javascript" src="{CONST::WEBSITE_URL}/nuts/_templates/form_func.js"></script>






</form>

<!-- form valid -->
< bloc::form_valid>
<div id="form_valid">
	<img src="img/form_valid.png" />
	<br />
	<br />
	{msg}<br />
	<br />
	<input type="button" value="{$nuts_lang_msg[26]}" onclick="if('{$_GET['popup']}' == '1'){window.close();}else{$('#form_window').dialog('close');}" />


<bloc::js_form_valid>
<script src="{CONST::PLUGIN_URL}/form_valid.js"></script>
</bloc::js_form_valid>

</div>

<div id="trt_progress_window">

	<div id="trt_progress">
		<div id="trt_progress_bar">&nbsp;</div>
	</div>

	<span id="trt_progress_percent">0</span> %
	(<span id="trt_progress_start">0</span> / <span id="trt_progress_end">0</span>)

	<iframe></iframe>

</div>




< /bloc::form_valid>
<!-- form valid -->

</div>
<!-- /ajax::form -->


