<!-- visual_query_builder -->
<div id="visual_query_builder">



    <ul id="ntabs0" class="ntabs">
        <li class="selected">Query Designer</li>
        <li>{$lang_msg[1]}</li>
    </ul>


    <!-- wrapper -->
    <div id="ntabs0_content" class="ntabs_content">

        <!-- tables_wrapper -->
        <div id="tables_wrapper" class="ntab_content">

            <!-- tables -->
            <div id="tables">

                <div id="resizer" opened="1"></div>

                <!-- tables_search -->
                <div id="table_search">
                    <input type="text" id="table_search_input" placeholder="{$nuts_lang_msg[11]}" value="{$_GET['table_filter']}" />
                </div>
                <!-- /tables_search -->

                <ul>

                    <bloc::tables>
                    <li class="{table_type}">{table_name}</li>
                    </bloc::tables>

                </ul>

            </div>
            <!-- /tables -->


            <!-- right_view -->
            <div id="right_view">

                <!-- sql_btns -->
                <div id="sql_btns">

                    <button title="Alt + X" accesskey="x">SELECT</button>
                    <select id="select_funcs">
                        <option></option>

                        <optgroup label="Aggregate functions">
                            <option value="COUNT([FIELD]) AS [TEXT]">COUNT()</option>
                            <option value="SUM([FIELD]) AS [TEXT]">SUM()</option>
                            <option value="AVG([FIELD]) AS [TEXT]">AVG()</option>
                            <option value="MIN([FIELD]) AS [TEXT]">MIN()</option>
                            <option value="MAX([FIELD]) AS [TEXT]">MAX()</option>
                            <option value="GROUP_CONCAT([FIELD]) AS [TEXT]">GROUP_CONCAT()</option>
                        </optgroup>

                        <optgroup label="String functions">
                            <option value="UPPER([FIELD]) AS [TEXT]">UPPER()</option>
                            <option value="LOWER([FIELD]) AS [TEXT]">LOWER()</option>
                            <option value="CONCAT([FIELD], '[TEXT]') AS [TEXT]">CONCAT()</option>
                            <option value="CONCAT_WS('[TEXT]', [FIELD]) AS [TEXT]">CONCAT_WS()</option>
                            <option value="REPLACE([FIELD], '[TEXT]', '[TEXT]') AS [TEXT]">REPLACE()</option>
                        </optgroup>

                        <optgroup label="Date functions">
                            <option value="DATE_FORMAT([FIELD], '%d/%m/%Y') AS [TEXT]">DATE_FORMAT()</option>
                            <option value="STR_TO_DATE([FIELD], '%d/%m/%Y') AS [TEXT]">STR_TO_DATE()</option>
                            <option value="DATE_ADD([FIELD], INTERVAL 1 MONTH) AS [TEXT]">DATE_ADD(+1 month)</option>
                            <option value="DATE_SUB([FIELD], INTERVAL 1 MONTH) AS [TEXT]">DATE_SUB(-1 month)</option>
                            <option value="YEAR([FIELD]) AS [TEXT]">YEAR()</option>
                            <option value="MONTH([FIELD]) AS [TEXT]">MONTH()</option>
                        </optgroup>
                    </select>


                    <button title="Alt + J" accesskey="j">JOIN</button>
                    <button title="Alt + W" accesskey="w">WHERE</button>
                    <button title="Alt + G" accesskey="g">GROUP BY</button>
                    <button title="Alt + O" accesskey="o">ORDER BY</button>

                    <label><input type="radio" value="ASC" name="order_by_sort" checked /> ASC</label>
                    <label><input type="radio" value="DESC" name="order_by_sort" /> DESC</label>

                </div>
                <!-- /sql_btns -->


                <!-- canvas -->
                <div id="canvas"></div>
                <!-- /canvas -->

                <!-- sql_code -->
                <div id="SqlCodeHighlighter"></div>
                <textarea id="SqlCode" class="editor" wrap="off" spellcheck="false"></textarea>
                <!-- /sql_code -->

            </div>
            <!-- /right_view -->

            <div class="clearfix"></div>

        </div>
        <!-- /tables_wrapper -->


        <!-- results -->
        <div class="ntab_content">
            <div class="result_option">
                {$lang_msg[2]} <input type="text" id="Querylimit" value="100" />
                <input type="button" value="{$lang_msg[3]}" id="QueryPreviewButton" />
            </div>

            <div id="previewer"></div>

        </div>
        <!-- /results -->

    </div>
    <!-- /wrapper -->

</div>
<canvas id="canvas_bkg"></canvas>

<div id="visual_query_builder_save">
    <input type="button" id="VQBSave" accesskey="S" value="{$nuts_lang_msg[49]} (Alt+S)" />
</div>


<!-- /visual_query_builder -->

<script type="text/javascript">
var get_parent = "{$_GET['parent']}";

var lang_msg_4 = "{$lang_msg[4]}";
var lang_msg_5 = "{$lang_msg[5]}";
var lang_msg_6 = "{$lang_msg[6]}";
var lang_msg_7 = "{$lang_msg[7]}";
var lang_msg_8 = "{$lang_msg[8]}";
var lang_msg_9 = "{$lang_msg[9]}";
var lang_msg_10 = "{$lang_msg[10]}";
var lang_msg_11 = "{$lang_msg[11]}";
var lang_msg_12 = "{$lang_msg[12]}";
var lang_msg_13 = "{$lang_msg[13]}";
var lang_msg_17 = "{$lang_msg[17]}";
</script>

<script type="text/javascript" src="/plugins/_visual-query-builder/table.js?t={$timer}"></script>
<script type="text/javascript" src="/plugins/_visual-query-builder/query.js?t={$timer}"></script>
<script type="text/javascript" src="/plugins/_visual-query-builder/init.js"></script>
